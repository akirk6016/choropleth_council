---
title: "Max's Widget Work"
author: "Max Pepperdine"
format: html
editor: visual
---

## Load packages

```{r}
library(tidyverse)
library(here)
library(sf) #for working with vector spatial data:
library(terra) #for working with rasters:
library(tidyterra)
library(tmap) #for creating cool/interactive maps
library(maps)
```

## Ahupuaa's

### Load shapefile

```{r}
ahupuaa_raw_sf <- read_sf(here("data/ahupuaa/ahupuaa.shp"))

#basic static plot of ahupuaa boundaries
ggplot() +
  geom_sf(data = ahupuaa_raw_sf)
```

## Food Priority & Carbon Storage

### Load rasters

```{r}
food_file <- here("data/food_priority1.tif")
food_raster <- rast(food_file)

carbon_file <- here("data/carbon_priority2.tif")
carbon_raster <- rast(carbon_file)
```

### Start Plotting

```{r}
#basic static plots
plot(food_data)
plot(carbon_data)

# ggplot() +
#   geom_sf(data = ahupuaa_raw_sf) +
#   geom_raster(data = carbon_data) +
#   geom_raster(data = food_data)


#interactive mapping
tmap_mode(mode = "view")

tm_shape(ahupuaa_raw_sf) + 
  tm_borders()
  

```

### Convert Rasters to Polygons & sf Objects

```{r}
#convert food raster to a SpatVector, and then a sf
food_polygon <- terra::as.polygons(food_raster)
food_sf <- st_as_sf(food_polygon)

#convert carbon raster to a SpatVector, and then a sf
carbon_polygon <- as.polygons(carbon_raster)
carbon_sf <- st_as_sf(carbon_polygon)
```

### Make static plots

```{r}
#basic static plots
ggplot() +
  geom_sf(data = ahupuaa_raw_sf) +
  geom_sf(data = carbon_sf, mapping = aes(color = Carbon)) +
  theme_bw()

ggplot() +
  geom_sf(data = ahupuaa_raw_sf) +
  geom_sf(data = food_sf, mapping = aes(color = Food)) +
  theme_bw()
```

### Make interactive plot

```{r}
#interactive plots
tmap_mode(mode = "view")
tmap_options(check.and.fix = TRUE)

tm_shape(ahupuaa_raw_sf, name = "Ahupuaa") +
  tm_polygons(border.col = "black", legend.show = FALSE) +
tm_shape(food_sf, name = "Food Only") +
  tm_polygons("Food") +
tm_shape(carbon_sf, name = "Carbon Only") +
  tm_polygons("Carbon")
```















